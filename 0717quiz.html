<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è²¡å‹™ä¸‰è¡¨çŸ¥è­˜ã‚¯ã‚¤ã‚º</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Noto Sans JPãƒ•ã‚©ãƒ³ãƒˆã‚’é©ç”¨ */
        body {
            font-family: 'Noto Sans JP', 'Inter', sans-serif;
        }
        /* ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .btn-press {
            transform: scale(0.95);
            transition: transform 0.1s ease-in-out;
        }
        /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex items-center justify-center min-h-screen p-4">

    <!-- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« -->
    <audio id="bgm-audio" src="https://hiro01200120.github.io/my-site/bgm.mp3" loop></audio>
    <audio id="correct-audio" src="https://hiro01200120.github.io/my-site/correct.mp3"></audio>
    <audio id="wrong-audio" src="https://hiro01200120.github.io/my-site/wrong.mp3"></audio>
    <audio id="start-audio" src="https://hiro01200120.github.io/my-site/start.mp3"></audio>
    <audio id="end-audio" src="https://hiro01200120.github.io/my-site/end.mp3"></audio>

    <div id="quiz-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-6 md:p-10 text-center transition-all duration-500">

        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div id="start-screen" class="fade-in">
            <img src="https://hiro01200120.github.io/my-site/rogo.jpg" alt="ãƒ­ã‚´" class="mx-auto mb-6 rounded-lg max-w-xs h-auto shadow-md" onerror="this.style.display='none';">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-700 mb-4">è²¡å‹™ä¸‰è¡¨çŸ¥è­˜ã‚¯ã‚¤ã‚º</h1>
            <p class="text-gray-600 mb-8">ã‚ãªãŸã®è²¡å‹™çŸ¥è­˜ã‚’è©¦ã—ã¦ã¿ã‚ˆã†ï¼</p>
            <button id="start-button" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105">
                ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹
            </button>
        </div>

        <!-- ã‚¯ã‚¤ã‚ºç”»é¢ -->
        <div id="quiz-screen" class="hidden">
            <div class="mb-6 text-left">
                <p id="question-number" class="text-xl font-bold text-blue-500"></p>
                <h2 id="question" class="text-2xl font-bold mt-2"></h2>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <!-- é¸æŠè‚¢ã¯JSã§ç”Ÿæˆ -->
            </div>
            <div id="feedback-container" class="hidden text-left p-4 rounded-lg mt-4">
                <p id="feedback-text" class="text-xl font-bold mb-2"></p>
                <p id="explanation" class="text-gray-700"></p>
            </div>
            <button id="next-button" class="hidden w-full mt-6 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg text-xl shadow-lg hover:shadow-xl transition-all duration-300">
                æ¬¡ã®å•é¡Œã¸
            </button>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="result-screen" class="hidden">
            <h2 class="text-4xl font-bold text-gray-700 mb-4">çµæœç™ºè¡¨</h2>
            <p id="score" class="text-2xl text-gray-600 mb-2"></p>
            <p id="score-message" class="text-lg text-blue-600 font-semibold mb-8"></p>
            
            <div class="text-left my-8">
                <h3 class="text-2xl font-bold mb-4 text-center">è§£ç­”ãƒ»è§£èª¬ä¸€è¦§</h3>
                <div class="overflow-x-auto">
                    <table class="w-full min-w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-200">
                            <tr>
                                <th scope="col" class="px-4 py-3">å•é¡Œ</th>
                                <th scope="col" class="px-4 py-3">ã‚ãªãŸã®å›ç­”</th>
                                <th scope="col" class="px-4 py-3">æ­£è§£</th>
                                <th scope="col" class="px-4 py-3">è§£èª¬</th>
                            </tr>
                        </thead>
                        <tbody id="summary-table-body">
                            <!-- çµæœä¸€è¦§ã¯JSã§ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <button id="restart-button" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl shadow-lg hover:shadow-xl transition-all duration-300">
                ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹
            </button>
        </div>
    </div>

    <script>
        // --- ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ ---
        const quizData = [
            {
                question: "è²¡å‹™ä¸‰è¡¨ã¨å‘¼ã°ã‚Œã‚‹3ã¤ã®æ›¸é¡ã§ã€Œæç›Šè¨ˆç®—æ›¸ã€ä»¥å¤–ã®2ã¤ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "äº‹æ¥­è¨ˆç”»æ›¸ã€çµ„ç¹”å›³", b: "è²¸å€Ÿå¯¾ç…§è¡¨ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸", c: "æ±ºç®—æ›¸ã€è²¡å‹™è«¸è¡¨", d: "äº‹æ¥­å ±å‘Šæ›¸ã€è²¸å€Ÿå¯¾ç…§è¡¨" },
                answer: "b",
                explanation: "è²¡å‹™ä¸‰è¡¨ã¨ã¯ã€æ±ºç®—æ›¸ã®æ›¸é¡ã®ä¸­ã§ã‚‚ç‰¹ã«é‡è¦ãªã€Œæç›Šè¨ˆç®—æ›¸ï¼ˆP/Lï¼‰ã€ã€Œè²¸å€Ÿå¯¾ç…§è¡¨ï¼ˆB/Sï¼‰ã€ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸ï¼ˆC/Sï¼‰ã€ã®3ã¤ã®æ›¸é¡ã®ç·ç§°ã§ã™ã€‚"
            },
            {
                question: "å¤šãã®çµŒå–¶è€…ãŒè²¡å‹™ä¸‰è¡¨ã‚’è»½è¦–ã—ã¦ã„ã‚‹ç¾çŠ¶ãŒã‚ã‚Šã¾ã™ãŒã€æœ¬æ¥è²¡å‹™ä¸‰è¡¨ã¯ä½•ã®ãŸã‚ã«ã‚ã‚‹ã¨å¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                options: { a: "ç¨å‹™ç”³å‘Šã®ãŸã‚", b: "æå‡ºç”¨ã®æ›¸é¡ã¨ã—ã¦", c: "çµŒå–¶åˆ¤æ–­ã‚’è¡Œãªã†ãƒ’ãƒ³ãƒˆã‚’å¾—ã‚‹ãŸã‚", d: "é…å½“é¡ã‚’æ±ºå®šã™ã‚‹ãŸã‚" },
                answer: "c",
                explanation: "å¤šãã®çµŒå–¶è€…ã¯è²¡å‹™ä¸‰è¡¨ã‚’ã€Œæå‡ºç”¨ã®æ›¸é¡ã€ç¨‹åº¦ã«æ‰ãˆè»½è¦–ã—ã¦ã„ã‚‹ç¾çŠ¶ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯éå¸¸ã«å‹¿ä½“ãªã„ã“ã¨ã§ã™ã€‚è²¡å‹™ä¸‰è¡¨ã«ã¯çµŒå–¶åˆ¤æ–­ã‚’è€ƒãˆã‚‹ã€Œå¼·åŠ›ãªãƒ’ãƒ³ãƒˆã€ãŒæº€è¼‰ã§ã‚ã‚Šã€çµŒå–¶ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã ã¨å¼·èª¿ã•ã‚Œã¦ã„ã¾ã™ã€‚"
            },
            {
                question: "æç›Šè¨ˆç®—æ›¸ã«ç™»å ´ã™ã‚‹5ã¤ã®åˆ©ç›Šã®ã†ã¡ã€ã€Œæœ¬æ¥­ã§ã®åˆ©ç›Šã€ã‚’ç¤ºã™ã‚‚ã®ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "å£²ä¸Šç·åˆ©ç›Š", b: "å–¶æ¥­åˆ©ç›Š", c: "çµŒå¸¸åˆ©ç›Š", d: "å½“æœŸç´”åˆ©ç›Š" },
                answer: "b",
                explanation: "æç›Šè¨ˆç®—æ›¸ã«ã¯ã€Œå£²ä¸Šç·åˆ©ç›Šã€ã€Œå–¶æ¥­åˆ©ç›Šã€ã€ŒçµŒå¸¸åˆ©ç›Šã€ã€Œç¨å¼•å‰åˆ©ç›Šã€ã€Œå½“æœŸç´”åˆ©ç›Šã€ã®5ã¤ã®åˆ©ç›ŠãŒç™»å ´ã—ã¾ã™ã€‚ã“ã®ã†ã¡ã€å–¶æ¥­åˆ©ç›Šã¯ã€Œæœ¬æ¥­ã§ã®åˆ©ç›Šã€ã‚’ç¤ºã—ã¾ã™ã€‚ç”Ÿå”ã§ã¯äº‹æ¥­å‰°ä½™é‡‘ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚"
            },
            {
                question: "ä¼šç¤¾ãŒã€Œ1å¹´é–“ã®æ´»å‹•ã‚’é€šã—ã¦ã„ãã‚‰å„²ã‹ã£ãŸã®ã‹ï¼Ÿã€ã‚’ç¤ºã™ã€Œä¼šç¤¾ã®1å¹´é–“ã®æˆç¸¾è¡¨ã€ã¨ã‚‚ã„ã‚ã‚Œã‚‹æ›¸é¡ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "è²¸å€Ÿå¯¾ç…§è¡¨ï¼ˆB/Sï¼‰", b: "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸ï¼ˆC/Sï¼‰", c: "æç›Šè¨ˆç®—æ›¸ï¼ˆP/Lï¼‰", d: "çµŒå–¶è¨ˆç”»æ›¸" },
                answer: "c",
                explanation: "æç›Šè¨ˆç®—æ›¸ï¼ˆP/Lï¼‰ã¯ã€ä¼æ¥­ãŒ1å¹´é–“ã®æ´»å‹•ã‚’é€šã—ã¦ã„ãã‚‰å„²ã‹ã£ãŸã®ã‹ã‚’è¨˜éŒ²ã—ãŸæ›¸é¡ã§ã‚ã‚Šã€ã€Œä¼šç¤¾ã®1å¹´é–“ã®æˆç¸¾è¡¨ã€ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚"
            },
            {
                question: "è²¡å‹™ä¸‰è¡¨ã‚’çµŒå–¶ã«æœ¬å½“ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã®éµã¨ãªã‚‹è¦–ç‚¹ã®è»¢æ›ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "æ³•å¾‹ã®å°‚é–€å®¶ã«åˆ†æã‚’ä¾é ¼ã™ã‚‹", b: "è²¡å‹™ä¸‰è¡¨ã‚’è‡ªç¤¾ã®å¼·ã¿ã‚„å¼±ã¿ã‚’æŠŠæ¡ã—ã€æ¬¡ã®æˆ¦ç•¥ã‚’è€ƒãˆã‚‹ãŸã‚ã®åˆ†æè³‡æ–™ã¨æ‰ãˆã‚‹", c: "è²¡å‹™ä¸‰è¡¨ã®æ•°å­—ã‚’ç«¶åˆä»–ç¤¾ã¨æ¯”è¼ƒã™ã‚‹", d: "è²¡å‹™ä¸‰è¡¨ã®ä½œæˆé »åº¦ã‚’æ¸›ã‚‰ã™" },
                answer: "b",
                explanation: "è²¡å‹™ä¸‰è¡¨ã‚’çµŒå–¶ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€ã€Œæ±ºç®—ã‚„éŠ€è¡Œæå‡ºç”¨ã®æ›¸é¡ã€ã¨æ‰ãˆã‚‹ã®ã‚’ã‚„ã‚ã€è‡ªç¤¾ã®å¼·ã¿ã‚„å¼±ã¿ã‚’æŠŠæ¡ã—ã€æ¬¡ã®çµŒå–¶æˆ¦ç•¥ã‚’è€ƒãˆã‚‹ãŸã‚ã®ã€Œåˆ†æè³‡æ–™ã€ã¨ã—ã¦æ‰ãˆã‚‹è¦–ç‚¹ã®è»¢æ›ãŒéµã¨ãªã‚Šã¾ã™ã€‚æ•°å­—ã®è£ã«ã‚ã‚‹ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’èª­ã‚€ã“ã¨ãŒé‡è¦ã§ã™ã€‚"
            },
            {
                question: "æç›Šè¨ˆç®—æ›¸ã§è¦‹ã‚‹ã¹ããƒã‚¤ãƒ³ãƒˆã®ä¸€ã¤ã§ã‚ã‚‹ã€Œæç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ã€ãŒç¤ºã™ã‚‚ã®ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "ç›®æ¨™ã¨ã™ã‚‹å£²ä¸Šé«˜", b: "æå¤±ã‚’å‡ºã•ãªã„ãŸã‚ã«æ­»å®ˆã™ã¹ãå£²ä¸Šé«˜", c: "éå»æœ€é«˜ã®å£²ä¸Šé«˜", d: "ç«¶åˆä»–ç¤¾ã®å¹³å‡å£²ä¸Šé«˜" },
                answer: "b",
                explanation: "æç›Šåˆ†å²ç‚¹å£²ä¸Šé«˜ã¨ã¯ã€å£²ä¸Šé«˜ã¨è²»ç”¨ãŒåæ”¯ãƒˆãƒ³ãƒˆãƒ³ã«ãªã‚Šã€åˆ©ç›Šã‚‚æå¤±ã‚‚å‡ºãªã„ï¼ˆãƒ—ãƒ©ãƒã‚¤ã‚¼ãƒ­ï¼‰ã®å£²ä¸Šé«˜ã§ã™ã€‚ã“ã‚Œã¯ã€æå¤±ã‚’å‡ºã•ãªã„ãŸã‚ã«ã€Œçµ¶å¯¾æ­»å®ˆã™ã¹ãå£²ä¸Šé«˜ã€ãŒã„ãã‚‰ãªã®ã‹ã‚’ç¤ºã—ã¦ãã‚Œã¾ã™ã€‚"
            },
            {
                question: "å…¨æ¥­ç¨®ã®å¹³å‡ã§ã€ŒãŠã‚ˆã5ï¼…ã€ãŒç›®å®‰ã¨ã•ã‚Œã¦ã„ã‚‹æç›Šè¨ˆç®—æ›¸ã®æŒ‡æ¨™ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "å£²ä¸Šé«˜å¢—åŠ ç‡", b: "å£²ä¸Šç·åˆ©ç›Šç‡", c: "å£²ä¸Šé«˜çµŒå¸¸åˆ©ç›Šç‡", d: "å–¶æ¥­åˆ©ç›Šç‡" },
                answer: "c",
                explanation: "å£²ä¸Šé«˜çµŒå¸¸åˆ©ç›Šç‡ã¯ã€ã€ŒåŠ¹ç‡ã‚ˆãåˆ©ç›Šã‚’æ®‹ã›ã¦ã„ã‚‹ã®ã‹ï¼Ÿã€ãŒã‚ã‹ã‚‹æŒ‡æ¨™ã§ã‚ã‚Šã€å…¨æ¥­ç¨®ã®å¹³å‡ãŒã€ŒãŠã‚ˆã5ï¼…ã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚"
            },
            {
                question: "æç›Šè¨ˆç®—æ›¸ã§ã¯åˆ©ç›ŠãŒå‡ºã¦ã„ã‚‹ã®ã«ã€æ‰‹å…ƒã«ç¾é‡‘ãŒãªãè³‡é‡‘ã‚·ãƒ§ãƒ¼ãƒˆã—ã¦å€’ç”£ã—ã¦ã—ã¾ã†ç¾è±¡ã‚’ä½•ã¨å‘¼ã³ã¾ã™ã‹ï¼Ÿ",
                options: { a: "é€£é–å€’ç”£", b: "é»’å­—å€’ç”£", c: "ä¸æ¸¡ã‚Šå€’ç”£", d: "ä¸è‰¯å‚µæ¨©å€’ç”£" },
                answer: "b",
                explanation: "æç›Šè¨ˆç®—æ›¸ã§åˆ©ç›ŠãŒå‡ºã¦ã„ã¦ã‚‚ã€å®Ÿéš›ã«å…¥é‡‘ã•ã‚Œã‚‹ã‚ˆã‚Šã‚‚å‰ã«è³‡é‡‘ãŒä¸è¶³ã—ã¦å€’ç”£ã™ã‚‹ã“ã¨ã‚’ã€Œé»’å­—å€’ç”£ã€ã¨å‘¼ã³ã¾ã™ã€‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸ã¯ã€ã“ã®æ‰‹å…ƒã®ç¾é‡‘ã‚’æŠŠæ¡ã™ã‚‹ãŸã‚ã«é‡è¦ãªè³‡æ–™ã§ã™ã€‚"
            },
            {
                question: "ä¼šç¤¾ã®è²¡æ”¿çŠ¶æ…‹ã€ã™ãªã‚ã¡ã€Œå€’ç”£ã—ãªã„ä¼šç¤¾ãªã®ã‹ï¼Ÿã€ã€Œå®‰å…¨ãªä¼šç¤¾ãªã®ã‹ï¼Ÿã€ãŒã‚ã‹ã‚‹æ›¸é¡ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: { a: "æç›Šè¨ˆç®—æ›¸ï¼ˆP/Lï¼‰", b: "ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸ï¼ˆC/Sï¼‰", c: "è²¸å€Ÿå¯¾ç…§è¡¨ï¼ˆB/Sï¼‰", d: "æç›Šåˆ†å²ç‚¹è¨ˆç®—æ›¸" },
                answer: "c",
                explanation: "è²¸å€Ÿå¯¾ç…§è¡¨ï¼ˆB/Sï¼‰ã¯ã€ä¼šç¤¾ã®è²¡æ”¿çŠ¶æ…‹ãŒä¸€ç›®ç­ç„¶ã¨ãªã‚‹ã€Œä¼šç¤¾ãŒæŒã£ã¦ã„ã‚‹è³‡ç”£ã¨ã€æŠ±ãˆã¦ã„ã‚‹è² å‚µã®ä¸€è¦§è¡¨ã€ã§ã‚ã‚Šã€å€’ç”£ã—ãªã„å®‰å…¨ãªä¼šç¤¾ãªã®ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚"
            },
            {
                question: "è²¸å€Ÿå¯¾ç…§è¡¨ã§è¦‹ã‚‹ã¹ããƒã‚¤ãƒ³ãƒˆã®ä¸€ã¤ã§ã‚ã‚‹ã€Œæ‰‹å…ƒæµå‹•æ€§ã€ã¯ã€å…·ä½“çš„ã«ä½•ã‚’ç¤ºã™æŒ‡æ¨™ã§ã™ã‹ï¼Ÿ",
                options: { a: "ä¼šç¤¾ã®å€Ÿå…¥é‡‘ã®ç·é¡", b: "æŠ•è³‡ã«å›ã›ã‚‹è³‡é‡‘ã®é‡", c: "ã™ãã«ä½¿ãˆã‚‹ãŠé‡‘ãŒä¼šç¤¾ã«ã©ã‚Œã ã‘ã‚ã‚‹ã‹", d: "å°†æ¥çš„ãªå£²ä¸Šäºˆæ¸¬" },
                answer: "c",
                explanation: "æ‰‹å…ƒæµå‹•æ€§ã¯ã€è¶…çŸ­æœŸçš„ãªè³‡é‡‘å®‰å®šæ€§ã‚’æ¸¬ã‚‹æŒ‡æ¨™ã§ã‚ã‚Šã€ã€Œã™ãã«ä½¿ãˆã‚‹ãŠé‡‘ãŒã€ä¼šç¤¾ã«ã©ã‚Œã ã‘ã‚ã‚‹ã‹ã€ã‚’ç¤ºã—ã¾ã™ã€‚"
            }
        ];

        // --- DOMè¦ç´  ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const startButton = document.getElementById('start-button');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        const questionNumberEl = document.getElementById('question-number');
        const questionEl = document.getElementById('question');
        const optionsContainer = document.getElementById('options-container');
        const feedbackContainer = document.getElementById('feedback-container');
        const feedbackTextEl = document.getElementById('feedback-text');
        const explanationEl = document.getElementById('explanation');
        const scoreEl = document.getElementById('score');
        const scoreMessageEl = document.getElementById('score-message');
        const summaryTableBody = document.getElementById('summary-table-body');

        // --- éŸ³å£°è¦ç´  ---
        const bgmAudio = document.getElementById('bgm-audio');
        const correctAudio = document.getElementById('correct-audio');
        const wrongAudio = document.getElementById('wrong-audio');
        const startAudio = document.getElementById('start-audio');
        const endAudio = document.getElementById('end-audio');

        // --- ã‚¯ã‚¤ã‚ºã®çŠ¶æ…‹ç®¡ç† ---
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];

        // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ---
        startButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', showNextQuestion);
        restartButton.addEventListener('click', restartQuiz);

        // --- é–¢æ•° ---
        function startQuiz() {
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            quizScreen.classList.add('fade-in');
            
            // éŸ³å£°å†ç”Ÿ
            startAudio.play();
            bgmAudio.volume = 0.3; // BGMã®éŸ³é‡ã‚’å°‘ã—ä¸‹ã’ã‚‹
            bgmAudio.play().catch(e => console.log("BGMã®è‡ªå‹•å†ç”ŸãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚"));

            // çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            
            showQuestion();
        }

        function showQuestion() {
            // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¨æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ
            feedbackContainer.classList.add('hidden');
            nextButton.classList.add('hidden');
            optionsContainer.innerHTML = '';

            // å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const currentQuestion = quizData[currentQuestionIndex];
            
            // å•é¡Œã‚’è¡¨ç¤º
            questionNumberEl.textContent = `å•é¡Œ ${currentQuestionIndex + 1}`;
            questionEl.textContent = currentQuestion.question;

            // é¸æŠè‚¢ã‚’ç”Ÿæˆã—ã¦è¡¨ç¤º
            for (const key in currentQuestion.options) {
                const option = currentQuestion.options[key];
                const button = document.createElement('button');
                button.innerHTML = `<span class="font-bold mr-2">${key.toUpperCase()}.</span> ${option}`;
                button.dataset.key = key;
                button.classList.add('w-full', 'p-4', 'border-2', 'border-gray-300', 'rounded-lg', 'text-left', 'hover:bg-gray-100', 'hover:border-blue-400', 'transition-all', 'duration-200');
                button.addEventListener('click', checkAnswer);
                optionsContainer.appendChild(button);
            }
        }

        function checkAnswer(event) {
            const selectedButton = event.currentTarget;
            const selectedKey = selectedButton.dataset.key;
            const currentQuestion = quizData[currentQuestionIndex];
            const isCorrect = selectedKey === currentQuestion.answer;

            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ã‚’ä¿å­˜
            userAnswers[currentQuestionIndex] = {
                selected: selectedKey,
                correct: currentQuestion.answer,
                selectedText: currentQuestion.options[selectedKey],
                correctText: currentQuestion.options[currentQuestion.answer]
            };

            // å…¨ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            Array.from(optionsContainer.children).forEach(btn => {
                btn.disabled = true;
                // æ­£è§£ã®é¸æŠè‚¢ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
                if (btn.dataset.key === currentQuestion.answer) {
                    btn.classList.remove('border-gray-300', 'hover:bg-gray-100');
                    btn.classList.add('bg-green-100', 'border-green-500', 'ring-2', 'ring-green-300');
                }
            });

            if (isCorrect) {
                score++;
                correctAudio.play();
                feedbackTextEl.textContent = 'ğŸ‰ æ­£è§£ï¼';
                feedbackTextEl.classList.add('text-green-600');
                feedbackContainer.classList.remove('bg-red-100');
                feedbackContainer.classList.add('bg-green-100');
                selectedButton.classList.remove('border-gray-300', 'hover:bg-gray-100');
                selectedButton.classList.add('bg-green-100', 'border-green-500');
            } else {
                wrongAudio.play();
                feedbackTextEl.textContent = 'ğŸ˜¢ ä¸æ­£è§£...';
                feedbackTextEl.classList.add('text-red-600');
                feedbackContainer.classList.remove('bg-green-100');
                feedbackContainer.classList.add('bg-red-100');
                selectedButton.classList.remove('border-gray-300', 'hover:bg-gray-100');
                selectedButton.classList.add('bg-red-100', 'border-red-500', 'ring-2', 'ring-red-300');
            }
            
            // è§£èª¬ã‚’è¡¨ç¤º
            explanationEl.textContent = currentQuestion.explanation;
            feedbackContainer.classList.remove('hidden');
            feedbackContainer.classList.add('fade-in');
            
            // æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            nextButton.classList.remove('hidden');
            if (currentQuestionIndex === quizData.length - 1) {
                nextButton.textContent = 'çµæœã‚’è¦‹ã‚‹';
            }
        }

        function showNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < quizData.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            resultScreen.classList.add('fade-in');
            
            // éŸ³å£°
            bgmAudio.pause();
            bgmAudio.currentTime = 0;
            endAudio.play();

            // ã‚¹ã‚³ã‚¢è¡¨ç¤º
            scoreEl.textContent = `ã‚ãªãŸã®ã‚¹ã‚³ã‚¢: ${score} / ${quizData.length} å•æ­£è§£`;
            
            // ã‚¹ã‚³ã‚¢ã«å¿œã˜ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            let message = "";
            const percentage = (score / quizData.length) * 100;
            if (percentage === 100) {
                message = "ç´ æ™´ã‚‰ã—ã„ï¼å…¨å•æ­£è§£ã§ã™ï¼è²¡å‹™ãƒã‚¹ã‚¿ãƒ¼ã§ã™ã­ï¼";
            } else if (percentage >= 80) {
                message = "ãŠã—ã„ï¼ã‚ã¨å°‘ã—ã§å…¨å•æ­£è§£ã§ã—ãŸï¼";
            } else if (percentage >= 50) {
                message = "ã‚ˆãé ‘å¼µã‚Šã¾ã—ãŸï¼ã•ã‚‰ã«çŸ¥è­˜ã‚’æ·±ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚";
            } else {
                message = "ãŠç–²ã‚Œæ§˜ã§ã—ãŸã€‚å¾©ç¿’ã—ã¦å†ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼";
            }
            scoreMessageEl.textContent = message;

            // è§£ç­”ä¸€è¦§ã‚’ç”Ÿæˆ
            generateSummaryTable();
        }
        
        function generateSummaryTable() {
            summaryTableBody.innerHTML = '';
            quizData.forEach((quiz, index) => {
                const userAnswer = userAnswers[index];
                const row = document.createElement('tr');
                row.classList.add('bg-white', 'border-b');

                const isCorrect = userAnswer.selected === userAnswer.correct;

                row.innerHTML = `
                    <td class="px-4 py-3 font-medium text-gray-900">
                        <span class="font-bold">Q${index + 1}.</span> ${quiz.question.substring(0, 20)}...
                    </td>
                    <td class="px-4 py-3 ${isCorrect ? 'text-green-600' : 'text-red-600'}">
                        ${isCorrect ? 'âœ”' : 'âœ–'} ${userAnswer.selectedText}
                    </td>
                    <td class="px-4 py-3 text-green-600">${userAnswer.correctText}</td>
                    <td class="px-4 py-3">${quiz.explanation}</td>
                `;
                summaryTableBody.appendChild(row);
            });
        }

        function restartQuiz() {
            resultScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            startScreen.classList.add('fade-in');
            nextButton.textContent = 'æ¬¡ã®å•é¡Œã¸';
        }
    </script>
</body>
</html>
